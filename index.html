<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Reproductor Fullscreen</title>
  <script src="//cdn.jsdelivr.net/npm/@clappr/player@0.8/dist/clappr.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@swarmcloud/hls/p2p-engine.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }
    #player {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
}

#logo {
  position: absolute; /* importante: ahora dentro del player */
  top: 10px;
  right: 70px;
  z-index: 9999;
}

#logo img {
  width: 80px;
  height: auto;
  opacity: 0.9;
}
}
    /* Ajuste de la barra */
    .media-control[data-media-control] 
    .media-control-layer[data-controls] 
    .bar-container[data-seekbar] 
    .bar-background[data-seekbar] {
      height: 5px !important;
    }
    .media-control[data-media-control] 
    .media-control-layer[data-controls] 
    .bar-container[data-seekbar]:hover 
    .bar-background[data-seekbar] {
      height: 7px !important;
      
  </style>
</head>
<body>
  <div id="player">
  <!-- Logo flotante dentro del reproductor -->
  <div id="logo">
    <img src="https://i.ibb.co/sJmvqM4T/1000170748.png" alt="Logo">
  </div>
</div>


  <script>
    // Lista de URLs de tus streams
    const canales = {
      "espn": "https://wp9xqedt.fubohd.com:443/espn/mono.m3u8?token=0294f0647ac90f54bff14676ae92c8739b4a2d6b-fb-1757694490-1757676490",
      "espn2": "https://anvtcax.fubohd.com:443/espn2/mono.m3u8?token=6b62c80f81be83bbfc0a8afa73bf21cc665073a9-25-1757694528-1757676528",
      "espn3": "https://ym9yzq.fubohd.com:443/espn3/mono.m3u8?token=633f413f6c30e8737cfb8eb838aff3f94e363cf6-53-1757694559-1757676559",
      "espn4": "https://a2vlca.fubohd.com:443/espn4/mono.m3u8?token=3b5bee88ed3de378e699bab084da759b4fa9c826-e2-1757694591-1757676591",
      "espn5": "https://a2vlca.fubohd.com:443/espn4/mono.m3u8?token=3b5bee88ed3de378e699bab084da759b4fa9c826-e2-1757694591-1757676591",
      "espn6": "",
      "espn7": "",
      "Dsports": "",
      "Dsports2": "",
      "Dsportsplus": "",
      "goltv": "",
      "vtvplus": "",
      "ecdfligapro": "",
      "foxsports": "",
      "foxsports2": "",
      "foxsports3": "",
      "tntsports": "https://anvtcax.fubohd.com/tntsports/mono.m3u8?token=83e635403ea92529619ef566494df3aabcafb554-25-1757699895-1757681895",
      "espnpremium": "",
      "tycsports": "",
      "tycinternacional": "",
      "telefe": "",
      "tvpublica": "",
      "golperu": "",
      "liga1max": "https://agvyby.fubohd.com:443/liga1max/mono.m3u8?token=89454ad56086d0be7fff1b1012d9d17151e6e594-18-1757700151-1757682151",
      "movistar": "",
      "winplus": "",
      "winsports2": "",
      "winsports": "",
      "foxsportsmx": "",
      "foxsports2mx": "",
      "foxsports3mx": "",
      "foxsportspremium": "",
      "tudn": "",
      "espnmx": "",
      "espn2mx": "",
      "espn3mx": "",
      "espn4mx": "",
      "calientetv": "",
      "azteca7": "",
      "canal5": "",
      "tvcdeportes": "",
      "aztecadeportes": "",
      "hisports": "",
      "skylaliga": "",
      "skybundesliga": "",
      "foxdeportes": "",
      "espndeportes": "",
      "tudnusa": "",
      "univision": "",
      "foxdeportes1usa": "",
      "foxdeportes2usa": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": "",
      "espn4": ""    
      };

    // Obtener parámetros de la URL
  const params = new URLSearchParams(window.location.search);
  const playParam = params.get("play");
  const rParam = params.get("r");

  let playbackURL = "";

  if (rParam) {
    // Si viene en Base64 → decodificar
    playbackURL = atob(rParam);
  } else if (playParam) {
    // Si viene como texto → buscar en la lista
    playbackURL = canales[playParam] || "";
    // Opcional: actualizar la URL a formato Base64
    if (playbackURL) {
      const base64URL = btoa(playbackURL);
      const nuevaURL = window.location.origin + window.location.pathname + "?r=" + base64URL;
      window.history.replaceState({}, "", nuevaURL);
    }
  }

  // Si no hay URL válida, mostrar error
  if (!playbackURL) {
    document.body.innerHTML = "<h2 style='color:white;text-align:center;margin-top:20%'>Canal no disponible</h2>";
  } else {
    // Configuración P2P
    const p2pConfig = { live: true, trackerZone: "us" };

    P2PEngineHls.tryRegisterServiceWorker(p2pConfig).then(() => {
      const player = new Clappr.Player({
        source: playbackURL,
        parentId: "#player",
        width: "100%",
        height: "100%",
        autoPlay: true,
        mediacontrol: { seekbar: "#D4ED31", buttons: "#FFFFFF" }
        
    });

    p2pConfig.hlsjsInstance = player.core.getCurrentPlayback()?._hls;
    const engine = new P2PEngineHls(p2pConfig);
  });
  }
  </script>

  <script>
  // Detectar cuando Clappr entra en fullscreen
  const playerContainer = document.getElementById('player');

  // Función para forzar landscape en fullscreen
  function lockLandscape() {
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock('landscape').catch(err => {
        console.log('No se pudo bloquear orientación:', err);
      });
    }
  }

  // Escuchar eventos de fullscreen
  playerContainer.addEventListener('fullscreenchange', () => {
    if (document.fullscreenElement) {
      lockLandscape(); // intento de bloquear horizontal
    }
  });

  // Para Chrome/Safari antiguos
  playerContainer.addEventListener('webkitfullscreenchange', () => {
    if (document.webkitFullscreenElement) lockLandscape();
  });
  playerContainer.addEventListener('mozfullscreenchange', () => {
    if (document.mozFullScreenElement) lockLandscape();
  });
  playerContainer.addEventListener('msfullscreenchange', () => {
    if (document.msFullscreenElement) lockLandscape();
  });
    const logo = document.getElementById('logo');

document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenElement) {
    document.fullscreenElement.appendChild(logo);
  } else {
    document.body.appendChild(logo); // volver a su lugar cuando se salga
  }
});

</script>


  <!-- Bloqueador de anuncios -->
  <script src="https://ads.tiogol.com/block.js?v=1.1"></script>
</body>
</html>
