 <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Player</title>
  <style>
    html, body {
      margin:0;
      padding:0;
      height:100%;
      width:100%;
      background:#000;
    }
    #player {
      width:100%;
      height:100%;
    }
    video {
      width:100%;
      height:100%;
      object-fit:cover; /* estira el video */
    }
  </style>
</head>
<body>
  <div id="player"></div>

  <!-- JWPlayer -->
  <script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
  <script>
    jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

    async function initPlayer() {
      const id = new URLSearchParams(window.location.search).get("id");
      if (!id) {
        document.getElementById("player").innerHTML = "<p style='color:red'>No se encontró ID</p>";
        return;
      }

      // Buscar en agenda.json
      const response = await fetch("https://hernanmix.github.io/play.github.io/agenda.json?v=" + Date.now());
      const eventos = await response.json();
      const evento = eventos.find(e => e.id === id);

      if (evento && evento.url) {
        const playerInstance = jwplayer("player").setup({
          file: evento.url,
          type: evento.url.endsWith(".m3u8") ? "hls" : "dash",
          autostart: true,
          width: "100%",
          height: "100%",
          stretching: "uniform",
          aspectratio: "16:9"
        });

        // Al entrar en fullscreen → forzar fill (sin bordes negros)
        playerInstance.on("fullscreen", function(e) {
          if (e.fullscreen) {
            playerInstance.setConfig({ stretching: "exactfit" });
          } else {
            playerInstance.setConfig({ stretching: "uniform" });
          }
        });

      } else {
        document.getElementById("player").innerHTML = "<p style='color:red'>Stream no encontrado</p>";
      }
    }

    initPlayer();
  </script>
</body>
</html>
